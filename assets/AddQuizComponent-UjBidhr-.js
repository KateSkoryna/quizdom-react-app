import{r as d,j as e,C as R,A as S,Q as Be,a as Le,B as Oe}from"./index-D4l3LmLo.js";import{c as ne,A as Ge,u as We,r as P,M as He,B as Ue,F as ae,g as Ve,o as Ke,a as Xe,t as Ye,b as ee,d as te}from"./store-C-hXBDCb.js";import{u as M,c as C,d as Ze,a as Je}from"./divWithClassName-DKmMyEm9.js";import{c as Pe,b as se}from"./Nav-Bc-tnqYV.js";import{F as l}from"./Form-B3OETpYA.js";import{b as A,C as et,c as le,u as tt,F as st}from"./index.esm-BhhqF4T2.js";import{d as ot}from"./index-CgnmIUyw.js";import{a as y}from"./addClassnameToText-BVN15QUs.js";import{B as w,C as ce}from"./Col-BFL9XBxp.js";function rt(){return d.useState(null)}var F;function oe(t){if((!F&&F!==0||t)&&ne){var s=document.createElement("div");s.style.position="absolute",s.style.top="-9999px",s.style.width="50px",s.style.height="50px",s.style.overflow="scroll",document.body.appendChild(s),F=s.offsetWidth-s.clientWidth,document.body.removeChild(s)}return F}const ie=d.forwardRef(({className:t,bsPrefix:s,as:n="div",...o},a)=>(s=M(s,"modal-body"),e.jsx(n,{ref:a,className:C(t,s),...o})));ie.displayName="ModalBody";const _=d.forwardRef(({bsPrefix:t,className:s,contentClassName:n,centered:o,size:a,fullscreen:u,children:j,scrollable:c,...i},h)=>{t=M(t,"modal");const m=`${t}-dialog`,x=typeof u=="string"?`${t}-fullscreen-${u}`:`${t}-fullscreen`;return e.jsx("div",{...i,ref:h,className:C(m,s,a&&`${t}-${a}`,o&&`${m}-centered`,c&&`${m}-scrollable`,u&&x),children:e.jsx("div",{className:C(`${t}-content`,n),children:j})})});_.displayName="ModalDialog";const de=d.forwardRef(({className:t,bsPrefix:s,as:n="div",...o},a)=>(s=M(s,"modal-footer"),e.jsx(n,{ref:a,className:C(t,s),...o})));de.displayName="ModalFooter";const ue=d.forwardRef(({bsPrefix:t,className:s,closeLabel:n="Close",closeButton:o=!1,...a},u)=>(t=M(t,"modal-header"),e.jsx(Ge,{ref:u,...a,className:C(s,t),closeLabel:n,closeButton:o})));ue.displayName="ModalHeader";const nt=Ze("h4"),me=d.forwardRef(({className:t,bsPrefix:s,as:n=nt,...o},a)=>(s=M(s,"modal-title"),e.jsx(n,{ref:a,className:C(t,s),...o})));me.displayName="ModalTitle";function at(t){return e.jsx(ae,{...t,timeout:null})}function lt(t){return e.jsx(ae,{...t,timeout:null})}const he=d.forwardRef(({bsPrefix:t,className:s,style:n,dialogClassName:o,contentClassName:a,children:u,dialogAs:j=_,"data-bs-theme":c,"aria-labelledby":i,"aria-describedby":h,"aria-label":m,show:x=!1,animation:f=!0,backdrop:g=!0,keyboard:b=!0,onEscapeKeyDown:v,onShow:q,onHide:p,container:D,autoFocus:xe=!0,enforceFocus:pe=!0,restoreFocus:fe=!0,restoreFocusOptions:ge,onEntered:je,onExit:B,onExiting:ye,onEnter:L,onEntering:O,onExited:G,backdropClassName:W,manager:H,...Ce},be)=>{const[we,Ne]=d.useState({}),[Me,U]=d.useState(!1),E=d.useRef(!1),$=d.useRef(!1),T=d.useRef(null),[k,ve]=rt(),Te=Pe(be,ve),V=se(p),ke=Je();t=M(t,"modal");const Re=d.useMemo(()=>({onHide:V}),[V]);function K(){return H||Ve({isRTL:ke})}function X(r){if(!ne)return;const N=K().getScrollbarWidth()>0,J=r.scrollHeight>Ke(r).documentElement.clientHeight;Ne({paddingRight:N&&!J?oe():void 0,paddingLeft:!N&&J?oe():void 0})}const z=se(()=>{k&&X(k.dialog)});We(()=>{P(window,"resize",z),T.current==null||T.current()});const Se=()=>{E.current=!0},Ae=r=>{E.current&&k&&r.target===k.dialog&&($.current=!0),E.current=!1},Y=()=>{U(!0),T.current=Ye(k.dialog,()=>{U(!1)})},qe=r=>{r.target===r.currentTarget&&Y()},Fe=r=>{if(g==="static"){qe(r);return}if($.current||r.target!==r.currentTarget){$.current=!1;return}p==null||p()},Ie=r=>{b?v==null||v(r):(r.preventDefault(),g==="static"&&Y())},Ee=(r,N)=>{r&&X(r),L==null||L(r,N)},$e=r=>{T.current==null||T.current(),B==null||B(r)},ze=(r,N)=>{O==null||O(r,N),Xe(window,"resize",z)},Qe=r=>{r&&(r.style.display=""),G==null||G(r),P(window,"resize",z)},_e=d.useCallback(r=>e.jsx("div",{...r,className:C(`${t}-backdrop`,W,!f&&"show")}),[f,W,t]),Z={...n,...we};Z.display="block";const De=r=>e.jsx("div",{role:"dialog",...r,style:Z,className:C(s,t,Me&&`${t}-static`,!f&&"show"),onClick:g?Fe:void 0,onMouseUp:Ae,"data-bs-theme":c,"aria-label":m,"aria-labelledby":i,"aria-describedby":h,children:e.jsx(j,{...Ce,onMouseDown:Se,className:o,contentClassName:a,children:u})});return e.jsx(He.Provider,{value:Re,children:e.jsx(Ue,{show:x,ref:Te,backdrop:g,container:D,keyboard:!0,autoFocus:xe,enforceFocus:pe,restoreFocus:fe,restoreFocusOptions:ge,onEscapeKeyDown:Ie,onShow:q,onHide:p,onEnter:Ee,onEntering:ze,onEntered:je,onExit:$e,onExiting:ye,onExited:Qe,manager:K(),transition:f?at:void 0,backdropTransition:f?lt:void 0,renderBackdrop:_e,renderDialog:De})})});he.displayName="Modal";const I=Object.assign(he,{Body:ie,Header:ue,Title:me,Footer:de,Dialog:_,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),ct=t=>{switch(t){case"1":return R[S.BEGINNER];case"2":return R[S.MEDIUM];case"3":return R[S.ADVANCED];case"4":return R[S.EXPERT];default:return R[S.BEGINNER]}},it=({fieldName:t})=>{const{control:s}=A();return e.jsx(et,{control:s,name:t,render:({field:{onChange:n,value:o}})=>e.jsxs(l.Group,{className:"mb-3",controlId:t,children:[e.jsxs(l.Label,{children:["Complexity level: ",ct(o)]}),e.jsx(l.Range,{onChange:a=>{n(a.target.value)},min:1,max:4,step:1,value:o})]})})},dt=Object.entries(Be),ut=({fieldName:t})=>{const{register:s}=A();return e.jsxs(l.Group,{className:"mb-2",controlId:"category",children:[e.jsx(l.Label,{children:"Category"}),e.jsxs(l.Select,{"aria-label":"Default select example",...s(t),children:[e.jsx("option",{children:"Choose a category"}),dt.map(([n,o])=>e.jsx("option",{value:o,children:o},n))]})]})},mt="_checkbox_ut4xm_1",ht="_checkboxIconWrapper_ut4xm_10",xt="_checkboxIcon_ut4xm_10",Q={checkbox:mt,checkboxIconWrapper:ht,checkboxIcon:xt},pt=({label:t,nestIndex:s,index:n})=>{const{register:o}=A();return e.jsx("div",{className:Q.checkbox,children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",...o(`questions[${s}].answers[${n}].isCorrect`)}),e.jsx("span",{className:Q.checkboxIconWrapper,children:e.jsx(ot,{className:Q.checkboxIcon})}),t]})})},ft="_errorText_1l6iq_1",gt={errorText:ft},jt=({nestIndex:t})=>{const{control:s,register:n,formState:{errors:o}}=A(),{fields:a,remove:u,append:j}=le({control:s,name:`questions[${t}].answers`});return e.jsxs(l.Group,{className:"mb-3",controlId:"div-questions",children:[a.map((c,i)=>{var m,x,f,g,b;const h=(b=(g=(f=(x=(m=o==null?void 0:o.questions)==null?void 0:m[t])==null?void 0:x.answers)==null?void 0:f[i])==null?void 0:g.answer)==null?void 0:b.message;return e.jsxs(l.Group,{className:"mb-3",controlId:`answer-${i}-${c.id}`,children:[d.createElement(l.Control,{...n(`questions[${t}].answers[${i}].answer`,{required:"Answer is required",minLength:{value:3,message:"Answer must be at least 4 characters"}}),type:"text",placeholder:"Add answer ...",key:c.id}),h?y("text-danger",h):y(gt.errorText),e.jsxs(l.Group,{className:"d-flex justify-content-between",controlId:`isCorrect-${i}-${c.id}`,children:[e.jsx(pt,{label:"Choose correct answer",nestIndex:t,index:i}),e.jsx(w,{type:"button",onClick:()=>u(i),children:"Remove answer"})]})]},c.id)}),e.jsx(w,{type:"button",onClick:()=>j({answer:"",isCorrect:!1}),children:"Add Answer"})]})},yt="_errorText_1l6iq_1",Ct={errorText:yt},bt=()=>{const{control:t,register:s,formState:{errors:n}}=A(),{fields:o,append:a,remove:u}=le({control:t,name:"questions"});return e.jsxs(l.Group,{className:"mb-3",controlId:"div-questions",children:[o.map((j,c)=>{var h,m,x;const i=(x=(m=(h=n==null?void 0:n.questions)==null?void 0:h[c])==null?void 0:m.questionTitle)==null?void 0:x.message;return e.jsxs(l.Group,{className:"mb-3",controlId:`question-${c}`,children:[e.jsxs("div",{className:"d-flex justify-content-between mb-3",children:[e.jsxs(l.Label,{className:"mb-0 align-self-center",children:["Question ",c+1]}),c>0&&e.jsx(w,{onClick:()=>u(c),children:"Remove Question"})]}),e.jsx(l.Control,{...s(`questions[${c}].questionTitle`,{required:"Question title is required",minLength:{value:4,message:"Question title must be at least 4 characters"}}),type:"text",placeholder:"Add question ..."}),i?y("text-danger",i):y(Ct.errorText),e.jsx(jt,{nestIndex:c})]},j.id)}),e.jsx(l.Group,{className:"text-center",children:e.jsx(w,{onClick:()=>a({questionTitle:"",answers:[{answer:"",isCorrect:!1},{answer:"",isCorrect:!1}]}),children:"Add Question"})})]})},wt="_errorText_1l6iq_1",re={errorText:wt},Nt=({handleClose:t})=>{var v,q;const s=ee(p=>p.newQuizData),n=ee(p=>p.setNewQuizData),{currentUser:o}=Le(),a=tt({mode:"onChange",defaultValues:s}),{register:u,handleSubmit:j,setError:c,reset:i,formState:{errors:h,isDirty:m,isSubmitting:x}}=a,f=async p=>{try{o&&(await Oe(p,o==null?void 0:o.id,o==null?void 0:o.name),n(p),i())}catch{c("root",{message:"Failed to create a quiz"})}},g=(v=h.title)==null?void 0:v.message,b=(q=h.description)==null?void 0:q.message;return e.jsx(ce,{children:e.jsx(st,{...a,children:e.jsxs(l,{onSubmit:j(f),children:[e.jsxs(l.Group,{className:"mb-3",controlId:"div-title",children:[e.jsx(l.Label,{children:"Quiz Title"}),e.jsx(l.Control,{...u("title",{required:"Title is required",minLength:8}),type:"text",placeholder:"Best Quiz ever...",autoFocus:!0}),g?y("text-danger",g):y(re.errorText)]}),e.jsxs(l.Group,{className:"mb-3",controlId:"div-description",children:[e.jsx(l.Label,{children:"Quiz Description"}),e.jsx(l.Control,{...u("description",{required:"Description is required",minLength:8}),as:"textarea",rows:3}),b?y("text-danger",b):y(re.errorText)]}),e.jsx(it,{fieldName:"complexity"}),e.jsx(ut,{fieldName:"category"}),e.jsx("h5",{className:"mx-auto mb-3 mt-3 text-center",children:"Add your questions"}),e.jsx(bt,{}),e.jsxs("div",{className:"d-flex justify-content-center",children:[e.jsx(w,{className:"me-3",variant:"secondary",onClick:t,children:"Close Quiz"}),e.jsx(w,{type:"submit",disabled:!m||x,children:x?"Submitting...":"Save Quiz"})]})]})})})},Mt=({showModal:t,handleCloseModal:s})=>e.jsxs(I,{size:"lg",show:t,onHide:s,scrollable:!0,dialogClassName:"h-75",children:[e.jsx(I.Header,{closeButton:!0,children:e.jsx(I.Title,{as:"h2",children:"Create your own Quiz"})}),e.jsx(I.Body,{children:e.jsx(Nt,{handleClose:s})})]}),Et=()=>{const t=te(a=>a.show),s=te(a=>a.setShow),n=()=>{s(!1)},o=()=>{s(!0)};return e.jsxs(ce,{className:"text-end",children:[e.jsx(w,{onClick:o,children:"Add Quiz"}),e.jsx(Mt,{showModal:t,handleCloseModal:n})]})};export{Et as A,I as M};
