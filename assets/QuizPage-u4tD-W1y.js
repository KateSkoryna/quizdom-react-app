import{r as c,j as e,a as R,w as $,x as K,Q as X,C as Z,y as J,z as ee}from"./index-t8ajuWjx.js";import{C as N}from"./Card-Cmo2-TOn.js";import{b as te,c as se}from"./index-Myp40_fg.js";import{B,C as M}from"./Col-8jQPUpGG.js";import{M as b,A as re}from"./AddQuizComponent-Bfp7GlVn.js";import{u as A,c as D}from"./divWithClassName-BIapQoNE.js";import{a as oe,m as ae,b as ne,u as ce,B as ie}from"./Nav-D9CR34MM.js";import{t as O}from"./truncateString-DL5WhCmR.js";import{F as G}from"./Form-Dr8a8J7e.js";import{L as le}from"./Loader-2IiMroC9.js";import"./index-DTUQHm-O.js";import"./store-BVrbnzYu.js";import"./index.esm-BcjI-xob.js";import"./addClassnameToText-BFEtEorB.js";const U=c.forwardRef(({bsPrefix:r,active:o,disabled:t,eventKey:s,className:h,variant:m,action:x,as:l,...a},u)=>{r=A(r,"list-group-item");const[n,i]=oe({key:ae(s,a.href),active:o,...a}),z=ne(j=>{if(t){j.preventDefault(),j.stopPropagation();return}n.onClick(j)});t&&a.tabIndex===void 0&&(a.tabIndex=-1,a["aria-disabled"]=!0);const f=l||(x?a.href?"a":"button":"div");return e.jsx(f,{ref:u,...a,...n,onClick:z,className:D(h,r,i.isActive&&"active",t&&"disabled",m&&`${r}-${m}`,x&&`${r}-action`)})});U.displayName="ListGroupItem";const V=c.forwardRef((r,o)=>{const{className:t,bsPrefix:s,variant:h,horizontal:m,numbered:x,as:l="div",...a}=ce(r,{activeKey:"onSelect"}),u=A(s,"list-group");let n;return m&&(n=m===!0?"horizontal":`horizontal-${m}`),e.jsx(ie,{ref:o,...a,as:l,className:D(t,u,h&&`${u}-${h}`,n&&`${u}-${n}`,x&&`${u}-numbered`)})});V.displayName="ListGroup";const E=Object.assign(V,{Item:U}),ue="_cardBody_h0hdy_1",de="_favoriteIcon_h0hdy_6",he="_itemSmalltext_h0hdy_13",me="_buttonContainer_h0hdy_24",xe="_quizDescription_h0hdy_35",fe="_checkbox_h0hdy_41",pe="_checkboxIconWrapper_h0hdy_53",je="_checkboxIcon_h0hdy_53",k={cardBody:ue,favoriteIcon:de,itemSmalltext:he,buttonContainer:me,quizDescription:xe,checkbox:fe,checkboxIconWrapper:pe,checkboxIcon:je},ye="_isCorrect_129mc_1",ge="_isFalse_129mc_5",Ce="_questionTitle_129mc_9",_e="_resultBody_129mc_13",S={isCorrect:ye,isFalse:ge,questionTitle:Ce,resultBody:_e},be=({show:r,handleClose:o,questions:t})=>{const[s,h]=c.useState(0),[m,x]=c.useState(t[s]),[l,a]=c.useState(t[s].answers),[u,n]=c.useState(!1),[i,z]=c.useState(0),[f,j]=c.useState(!1),L=c.useRef(null),y=c.useRef(null),I=c.useRef(null),w=c.useRef(null),v=[L,y,I,w],H=(d,g)=>{u||(g?(d.currentTarget.classList.add(S.isCorrect),n(!0),z(p=>p+1)):(d.currentTarget.classList.add(S.isFalse),n(!0),l.forEach((p,C)=>{var _,F,T;(_=v[C])!=null&&_.current&&p.isCorrect&&((T=(F=v[C])==null?void 0:F.current)==null||T.classList.add(S.isCorrect))})))},W=()=>{if(u){if(s===t.length-1)return j(!0),0;h(d=>d+1),x(t[s+1]),a(t[s+1].answers),n(!1),l.forEach((d,g)=>{var p,C,_;(p=v[g])!=null&&p.current&&d.isCorrect&&((_=(C=v[g])==null?void 0:C.current)==null||_.classList.remove(S.isCorrect))})}},Y=()=>{h(d=>d-1),x(t[s-1]),a(t[s-1].answers),n(!1),l.forEach((d,g)=>{var p,C,_;(p=v[g])!=null&&p.current&&d.isCorrect&&((_=(C=v[g])==null?void 0:C.current)==null||_.classList.remove(S.isCorrect))})},q=()=>{h(0),x(t[0]),a(t[0].answers),n(!1),z(0),j(!1)};return e.jsx(b,{show:r,onHide:o,fullscreen:"md-down",centered:!0,children:f?e.jsxs(e.Fragment,{children:[e.jsx(b.Header,{closeButton:!0,children:e.jsx(b.Title,{children:"Quiz Result"})}),e.jsxs(b.Body,{className:S.resultBody,children:[e.jsxs("h5",{children:["Your score is ",i," out of ",t.length]}),e.jsxs("h6",{children:["Correct answers: ",i/t.length*100,"%"]}),e.jsx("h5",{children:"Thank you for taking the quiz!"}),e.jsx(B,{onClick:q,className:S.button,children:"Reset Quiz"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(b.Header,{closeButton:!0,children:e.jsxs(b.Title,{children:["Question ",s+1]})}),e.jsxs(b.Body,{children:[e.jsx("h5",{className:S.questionTitle,children:m.questionTitle}),e.jsx(E,{children:l.map((d,g)=>e.jsx(E.Item,{ref:v[g],as:"li",className:"d-flex justify-content-between align-items-start",onClick:p=>H(p,d.isCorrect),children:e.jsx("div",{className:"ms-2 me-auto",children:e.jsx("div",{className:"fw-bold",children:d.answer})})},d.answer))})]}),e.jsxs(b.Footer,{className:"d-flex justify-content-center",children:[e.jsx(B,{variant:"secondary",disabled:s===0,onClick:Y,children:"Previous Question"}),e.jsx(B,{onClick:W,variant:"primary",children:"Next Question"}),e.jsxs("h6",{children:["Total Questions: ",s+1," of ",t.length]})]})]})})},Se=({handleModal:r})=>{const o=()=>{r()};return e.jsx(N.Link,{onClick:o,as:B,children:"Start Quiz"})},ve=({quiz:{title:r,complexity:o,description:t,id:s,authorName:h,publishedAt:m,questions:x}})=>{const[l,a]=c.useState(!1),[u,n]=c.useState(!1),i=()=>a(!1),z=()=>a(!0),{currentUser:f,setCurrentUser:j}=R(),L=async y=>{if(f){if(!y.target.checked){await $(y.target.id,f.id,"remove"),n(!1),j(I=>({...I??{},favorites:f.favorites.filter(w=>w!==y.target.id)}));return}await $(y.target.id,f.id,"add"),n(!0),j(I=>({...I??{},favorites:[...f.favorites,y.target.id]}))}};return c.useEffect(()=>{f&&f.favorites.includes(s)&&n(!0)},[]),e.jsxs(N.Body,{className:k.cardBody,children:[e.jsx("div",{className:k.checkbox,children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:u,onChange:y=>L(y),id:s}),u?e.jsx(te,{className:k.favoriteIcon,style:{fill:"#F7941D"}}):e.jsx(se,{className:k.favoriteIcon,style:{fill:"gray"}})]})}),e.jsx(N.Title,{children:O(r,40)}),e.jsx(N.Subtitle,{className:"mb-2 text-muted",children:o}),e.jsx(N.Text,{className:k.quizDescription,children:O(t,80)}),e.jsxs("div",{className:k.buttonContainer,children:[e.jsx(Se,{handleModal:z}),e.jsx(N.Link,{as:B,children:"Share Quiz"})]}),e.jsxs("small",{className:k.itemSmalltext,children:["Published on: ",m.toLocaleDateString()," by ",h]}),l&&e.jsx(be,{show:l,handleClose:i,questions:x})]})},ke=({quizes:r})=>e.jsx(M,{style:{paddingBottom:"80px",marginTop:"20px"},children:r.map(o=>e.jsx(N,{style:{width:"100%",marginBottom:"10px"},children:e.jsx(ve,{quiz:o})},o.id))}),Ne="_container_clstf_1",ze="_form_clstf_7",Be="_button_clstf_19",Ie="_error_clstf_29",Q={container:Ne,form:ze,button:Be,error:Ie},Qe="_selectCategory_13j12_1",Le={selectCategory:Qe},P=({fields:r,fieldsName:o,handleChange:t})=>e.jsxs(G.Select,{className:Le.selectCategory,onChange:s=>t(s.target.value),defaultValue:`Open ${o} menu`,children:[e.jsx("option",{children:`Open ${o} menu`}),r.map(s=>e.jsx("option",{value:s,children:s},s))]}),we=Object.values(X),Fe=Object.values(Z),Te={category:"",complexity:""},$e=()=>{const[r,o]=K(Te),[t,s]=c.useState(r.get("category")??""),[h,m]=c.useState(r.get("complexity")??""),[x,l]=c.useState(!1),a=i=>{if(i.preventDefault(),!t&&!h){l(!0);return}o({category:t,complexity:h})},u=i=>{if(console.log(i),i==="Open category menu"){s("");return}l(!1),s(i)},n=i=>{if(console.log(i),i==="Open complexity menu"){m("");return}l(!1),m(i)};return e.jsxs(M,{className:Q.container,children:[e.jsxs(G,{className:Q.form,onSubmit:a,children:[e.jsx(P,{fields:we,fieldsName:"category",handleChange:u}),e.jsx(P,{fields:Fe,fieldsName:"complexity",handleChange:n}),e.jsx(B,{className:Q.button,type:"submit",children:"Search"})]}),x&&e.jsx("p",{className:Q.error,children:"Please select search query"})]})},Ke=()=>{const r=J(),o=ee(),{currentUser:t}=R();return e.jsxs(e.Fragment,{children:[e.jsx($e,{}),t&&e.jsx(re,{}),r.state==="loading"?e.jsx(le,{}):e.jsx(ke,{quizes:o})]})};export{Ke as default};
