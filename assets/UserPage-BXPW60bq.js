import{r as l,j as e,R as $,a as w,b as je,c as ye,g as Ce,e as Y,s as be,d as Se,f as Ne,L as F}from"./index-t8ajuWjx.js";import{a as Ee}from"./index-Myp40_fg.js";import{u as b,c as y}from"./divWithClassName-BIapQoNE.js";import{m as $e,F as we}from"./Form-Dr8a8J7e.js";import{C}from"./Card-Cmo2-TOn.js";import{P as N,B as P,a as Ie,C as Te}from"./Col-8jQPUpGG.js";import{u as Ae,T as _,m as Z,S as L}from"./Nav-D9CR34MM.js";import{N as ee,F as te}from"./store-BVrbnzYu.js";import{G as ne}from"./index-DTUQHm-O.js";import{M as T,A as Be}from"./AddQuizComponent-Bfp7GlVn.js";import{C as Pe}from"./Collapse-pIZte1-Z.js";import{L as ze}from"./Loader-2IiMroC9.js";import{N as E}from"./Nav-C282UwiZ.js";import"./index.esm-BcjI-xob.js";import"./addClassnameToText-BFEtEorB.js";function se(t,n){return Array.isArray(t)?t.includes(n):t===n}const z=l.createContext({});z.displayName="AccordionContext";const Q=l.forwardRef(({as:t="div",bsPrefix:n,className:s,children:a,eventKey:r,...i},o)=>{const{activeEventKey:d}=l.useContext(z);return n=b(n,"accordion-collapse"),e.jsx(Pe,{ref:o,in:se(d,r),...i,className:y(s,n),children:e.jsx(t,{children:l.Children.only(a)})})});Q.displayName="AccordionCollapse";const k=l.createContext({eventKey:""});k.displayName="AccordionItemContext";const ae=l.forwardRef(({as:t="div",bsPrefix:n,className:s,onEnter:a,onEntering:r,onEntered:i,onExit:o,onExiting:d,onExited:c,...u},m)=>{n=b(n,"accordion-body");const{eventKey:x}=l.useContext(k);return e.jsx(Q,{eventKey:x,onEnter:a,onEntering:r,onEntered:i,onExit:o,onExiting:d,onExited:c,children:e.jsx(t,{ref:m,...u,className:y(s,n)})})});ae.displayName="AccordionBody";function Oe(t,n){const{activeEventKey:s,onSelect:a,alwaysOpen:r}=l.useContext(z);return i=>{let o=t===s?null:t;r&&(Array.isArray(s)?s.includes(t)?o=s.filter(d=>d!==t):o=[...s,t]:o=[t]),a==null||a(o,i),n==null||n(i)}}const U=l.forwardRef(({as:t="button",bsPrefix:n,className:s,onClick:a,...r},i)=>{n=b(n,"accordion-button");const{eventKey:o}=l.useContext(k),d=Oe(o,a),{activeEventKey:c}=l.useContext(z);return t==="button"&&(r.type="button"),e.jsx(t,{ref:i,onClick:d,...r,"aria-expanded":Array.isArray(c)?c.includes(o):o===c,className:y(s,n,!se(c,o)&&"collapsed")})});U.displayName="AccordionButton";const oe=l.forwardRef(({as:t="h2",bsPrefix:n,className:s,children:a,onClick:r,...i},o)=>(n=b(n,"accordion-header"),e.jsx(t,{ref:o,...i,className:y(s,n),children:e.jsx(U,{onClick:r,children:a})})));oe.displayName="AccordionHeader";const re=l.forwardRef(({as:t="div",bsPrefix:n,className:s,eventKey:a,...r},i)=>{n=b(n,"accordion-item");const o=l.useMemo(()=>({eventKey:a}),[a]);return e.jsx(k.Provider,{value:o,children:e.jsx(t,{ref:i,...r,className:y(s,n)})})});re.displayName="AccordionItem";const ie=l.forwardRef((t,n)=>{const{as:s="div",activeKey:a,bsPrefix:r,className:i,onSelect:o,flush:d,alwaysOpen:c,...u}=Ae(t,{activeKey:"onSelect"}),m=b(r,"accordion"),x=l.useMemo(()=>({activeEventKey:a,onSelect:o,alwaysOpen:c}),[a,o,c]);return e.jsx(z.Provider,{value:x,children:e.jsx(s,{ref:n,...u,className:y(i,m,d&&`${m}-flush`)})})});ie.displayName="Accordion";const O=Object.assign(ie,{Button:U,Collapse:Q,Item:re,Header:oe,Body:ae});function Me(t,n,s){const a=l.useRef(t!==void 0),[r,i]=l.useState(n),o=t!==void 0,d=a.current;return a.current=o,!o&&d&&r!==n&&i(n),[o?t:r,l.useCallback((...c)=>{const[u,...m]=c;let x=s==null?void 0:s(u,...m);return i(u),x},[s])]}const M={prefix:String(Math.round(Math.random()*1e10)),current:0},ce=$.createContext(M),_e=$.createContext(!1);let ke=!!(typeof window<"u"&&window.document&&window.document.createElement),K=new WeakMap;function Fe(t=!1){let n=l.useContext(ce),s=l.useRef(null);if(s.current===null&&!t){var a,r;let i=(r=$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(a=r.ReactCurrentOwner)===null||a===void 0?void 0:a.current;if(i){let o=K.get(i);o==null?K.set(i,{id:n.current,state:i.memoizedState}):i.memoizedState!==o.state&&(n.current=o.id,K.delete(i))}s.current=++n.current}return s.current}function Ke(t){let n=l.useContext(ce);n===M&&!ke&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let s=Fe(!!t),a=`react-aria${n.prefix}`;return t||`${a}-${s}`}function Re(t){let n=$.useId(),[s]=l.useState(He()),a=s?"react-aria":`react-aria${M.prefix}`;return t||`${a}-${n}`}const qe=typeof $.useId=="function"?Re:Ke;function Le(){return!1}function Qe(){return!0}function Ue(t){return()=>{}}function He(){return typeof $.useSyncExternalStore=="function"?$.useSyncExternalStore(Ue,Le,Qe):l.useContext(_e)}const D=1e3;function Ze(t,n,s){const a=(t-n)/(s-n)*100;return Math.round(a*D)/D}function G({min:t,now:n,max:s,label:a,visuallyHidden:r,striped:i,animated:o,className:d,style:c,variant:u,bsPrefix:m,...x},f){return e.jsx("div",{ref:f,...x,role:"progressbar",className:y(d,`${m}-bar`,{[`bg-${u}`]:u,[`${m}-bar-animated`]:o,[`${m}-bar-striped`]:o||i}),style:{width:`${Ze(n,t,s)}%`,...c},"aria-valuenow":n,"aria-valuemin":t,"aria-valuemax":s,children:r?e.jsx("span",{className:"visually-hidden",children:a}):a})}const le=l.forwardRef(({isChild:t=!1,...n},s)=>{const a={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...n};if(a.bsPrefix=b(a.bsPrefix,"progress"),t)return G(a,s);const{min:r,now:i,max:o,label:d,visuallyHidden:c,striped:u,animated:m,bsPrefix:x,variant:f,className:h,children:p,...g}=a;return e.jsx("div",{ref:s,...g,className:y(h,x),children:p?$e(p,j=>l.cloneElement(j,{isChild:!0})):G({min:r,now:i,max:o,label:d,visuallyHidden:c,striped:u,animated:m,bsPrefix:x,variant:f},s)})});le.displayName="ProgressBar";const De=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Ge=["activeKey","getControlledId","getControllerId"],Ve=["as"];function q(t,n){if(t==null)return{};var s={},a=Object.keys(t),r,i;for(i=0;i<a.length;i++)r=a[i],!(n.indexOf(r)>=0)&&(s[r]=t[r]);return s}function de(t){let{active:n,eventKey:s,mountOnEnter:a,transition:r,unmountOnExit:i,role:o="tabpanel",onEnter:d,onEntering:c,onEntered:u,onExit:m,onExiting:x,onExited:f}=t,h=q(t,De);const p=l.useContext(_);if(!p)return[Object.assign({},h,{role:o}),{eventKey:s,isActive:n,mountOnEnter:a,transition:r,unmountOnExit:i,onEnter:d,onEntering:c,onEntered:u,onExit:m,onExiting:x,onExited:f}];const{activeKey:g,getControlledId:j,getControllerId:v}=p,I=q(p,Ge),H=Z(s);return[Object.assign({},h,{role:o,id:j(s),"aria-labelledby":v(s)}),{eventKey:s,isActive:n==null&&H!=null?Z(g)===H:n,transition:r||I.transition,mountOnEnter:a??I.mountOnEnter,unmountOnExit:i??I.unmountOnExit,onEnter:d,onEntering:c,onEntered:u,onExit:m,onExiting:x,onExited:f}]}const ue=l.forwardRef((t,n)=>{let{as:s="div"}=t,a=q(t,Ve);const[r,{isActive:i,onEnter:o,onEntering:d,onEntered:c,onExit:u,onExiting:m,onExited:x,mountOnEnter:f,unmountOnExit:h,transition:p=ee}]=de(a);return e.jsx(_.Provider,{value:null,children:e.jsx(L.Provider,{value:null,children:e.jsx(p,{in:i,onEnter:o,onEntering:d,onEntered:c,onExit:u,onExiting:m,onExited:x,mountOnEnter:f,unmountOnExit:h,children:e.jsx(s,Object.assign({},r,{ref:n,hidden:!i,"aria-hidden":!i}))})})})});ue.displayName="TabPanel";const me=t=>{const{id:n,generateChildId:s,onSelect:a,activeKey:r,defaultActiveKey:i,transition:o,mountOnEnter:d,unmountOnExit:c,children:u}=t,[m,x]=Me(r,i,a),f=qe(n),h=l.useMemo(()=>s||((g,j)=>f?`${f}-${j}-${g}`:null),[f,s]),p=l.useMemo(()=>({onSelect:x,activeKey:m,transition:o,mountOnEnter:d||!1,unmountOnExit:c||!1,getControlledId:g=>h(g,"tabpane"),getControllerId:g=>h(g,"tab")}),[x,m,o,d,c,h]);return e.jsx(_.Provider,{value:p,children:e.jsx(L.Provider,{value:x||null,children:u})})};me.Panel=ue;function xe(t){return typeof t=="boolean"?t?te:ee:t}const he=({transition:t,...n})=>e.jsx(me,{...n,transition:xe(t)});he.displayName="TabContainer";const fe=l.forwardRef(({className:t,bsPrefix:n,as:s="div",...a},r)=>(n=b(n,"tab-content"),e.jsx(s,{ref:r,className:y(t,n),...a})));fe.displayName="TabContent";const pe=l.forwardRef(({bsPrefix:t,transition:n,...s},a)=>{const[{className:r,as:i="div",...o},{isActive:d,onEnter:c,onEntering:u,onEntered:m,onExit:x,onExiting:f,onExited:h,mountOnEnter:p,unmountOnExit:g,transition:j=te}]=de({...s,transition:xe(n)}),v=b(t,"tab-pane");return e.jsx(_.Provider,{value:null,children:e.jsx(L.Provider,{value:null,children:e.jsx(j,{in:d,onEnter:c,onEntering:u,onEntered:m,onExit:x,onExiting:f,onExited:h,mountOnEnter:p,unmountOnExit:g,children:e.jsx(i,{...o,ref:a,className:y(r,v,d&&"active")})})})})});pe.displayName="TabPane";const Je={eventKey:N.oneOfType([N.string,N.number]),title:N.node.isRequired,disabled:N.bool,tabClassName:N.string,tabAttrs:N.object},ge=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};ge.propTypes=Je;const A=Object.assign(ge,{Container:he,Content:fe,Pane:pe}),We="_userSection_yo8ue_1",Xe="_userSectionCard_yo8ue_8",Ye="_userCardInfo_yo8ue_20",V={userSection:We,userSectionCard:Xe,userCardInfo:Ye},et="_card_13jgq_1",tt="_cardTitle_13jgq_17",nt="_cardText_13jgq_24",st="_cardImg_13jgq_33",at="_imgChangeBtn_13jgq_40",ot="_imgChgangeIcon_13jgq_50",rt="_inputUpload_13jgq_64",S={card:et,cardTitle:tt,cardText:nt,cardImg:st,imgChangeBtn:at,imgChgangeIcon:ot,inputUpload:rt},it=()=>{const[t,n]=l.useState(),[s,a]=l.useState(""),[r,i]=l.useState(0),[o,d]=l.useState(!1),{currentUser:c,setCurrentUser:u}=w(),m=h=>{h&&h[0].size<1e7?n(h[0]):console.log("File is too big")};l.useEffect(()=>{t&&(()=>{if(t){const p=(new Date().getTime()+t.name).replace(/\s/g,""),g=je(be,`image/${p}`),j=ye(g,t);j.on("state_changed",v=>{const I=v.bytesTransferred/v.totalBytes*100;switch(i(I),v.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},v=>{console.log(v)},()=>{Ce(j.snapshot.ref).then(v=>{a(v)})})}else console.log("File not found")})()},[t]);const x=async()=>{d(!0);try{c&&(await Y(c==null?void 0:c.id,"avatar",s),u(h=>({...h??{},avatar:s}))),i(0),n(void 0),a(""),d(!1)}catch(h){console.log(h)}},f=c==null?void 0:c.dateOfBirth.toLocaleDateString().split("/").join(".");return e.jsx(C,{className:S.card,children:e.jsxs(C.Body,{children:[e.jsxs("label",{className:S.inputUpload,children:[e.jsx(Ee,{className:S.imgChgangeIcon}),e.jsx("input",{type:"file",onChange:h=>m(h.target.files)})]}),e.jsx(C.Img,{src:s||(c==null?void 0:c.avatar),className:S.cardImg}),e.jsx(C.Title,{className:S.cardTitle,children:c==null?void 0:c.name}),e.jsx(C.Text,{className:S.cardText,children:c==null?void 0:c.email}),e.jsx(C.Text,{className:S.cardText,children:f}),e.jsx(C.Text,{className:S.cardText,children:c==null?void 0:c.gender}),e.jsxs(C.Footer,{children:[e.jsx(le,{animated:!0,now:r}),e.jsx(P,{className:"w-100 mt-3",disabled:r!==100,onClick:x,children:o?"Saving...":"Save"})]})]})})},ct="_starZero_1wgyi_1",lt="_starRating_1wgyi_7",J={starZero:ct,starRating:lt};function dt(){const{currentUser:t}=w(),n=Number(t==null?void 0:t.avarageScore);return e.jsxs("div",{children:[e.jsxs("h5",{className:"mb-1",children:["Rating: ",n||0,"/10"]}),[1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs("span",{className:n>=s?J.starRating:J.starZero,children:[" ","★"," "]},s))]})}const ut="_aboutText_13ccc_1",mt="_editIcon_13ccc_5",W={aboutText:ut,editIcon:mt};function xt(t){return ne({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(t)}const ht=()=>{const[t,n]=l.useState(!1),{setCurrentUser:s,currentUser:a}=w(),[r,i]=l.useState((a==null?void 0:a.userInfo)||"I'm a new user and I don't have a bio yet"),o=()=>{n(!t)},d=u=>{i(u)},c=async()=>{a&&(await Y(a==null?void 0:a.id,"userInfo",r),s(u=>({...u??{},userInfo:r}))),n(!t)};return e.jsxs("div",{className:"mt-3",children:[e.jsxs("h4",{className:"mb-3",children:["About me ",e.jsx(xt,{className:W.editIcon,onClick:o})]}),t?e.jsxs("div",{children:[e.jsx(we.Control,{as:"textarea",value:r,onChange:u=>d(u.target.value)}),e.jsx(P,{className:"mt-3",onClick:c,children:"Save"})]}):e.jsx("p",{className:W.aboutText,children:a==null?void 0:a.userInfo})]})},ft=()=>e.jsxs("div",{className:"pt-3",children:[e.jsx("h5",{className:"mb-4  text-center",children:"My statistics"}),e.jsx(dt,{}),e.jsx(ht,{})]}),pt="_itemText_uu0p2_1",gt="_itemSmalltext_uu0p2_5",B={itemText:pt,itemSmalltext:gt};function vt(t){return ne({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M10.935 2.016c-0.218-0.869-0.999-1.516-1.935-1.516-0.932 0-1.71 0.643-1.931 1.516h-3.569v1h11v-1h-3.565zM9 1.5c0.382 0 0.705 0.221 0.875 0.516h-1.733c0.172-0.303 0.485-0.516 0.858-0.516zM13 4h1v10.516c0 0.827-0.673 1.5-1.5 1.5h-7c-0.827 0-1.5-0.673-1.5-1.5v-10.516h1v10.516c0 0.275 0.224 0.5 0.5 0.5h7c0.276 0 0.5-0.225 0.5-0.5v-10.516zM8 5v8h-1v-8h1zM11 5v8h-1v-8h1z"},child:[]}]})(t)}const jt="_deleteBtn_1mwjl_1",yt="_deleteBtnIcon_1mwjl_19",X={deleteBtn:jt,deleteBtnIcon:yt},Ct=()=>{const[t,n]=l.useState(!1),s=()=>n(!1),a=()=>n(!0);return e.jsxs(e.Fragment,{children:[e.jsx(P,{className:X.deleteBtn,onClick:a,children:e.jsx(vt,{className:X.deleteBtnIcon})}),e.jsxs(T,{show:t,onHide:s,centered:!0,children:[e.jsx(T.Header,{closeButton:!0,children:e.jsx(T.Title,{as:"h5",children:"Are you sure you want to delete this quiz?"})}),e.jsx(T.Body,{className:"text-center",children:"Be careful! After deletion, you cannot recover it."}),e.jsxs(T.Footer,{className:"justify-content-center",children:[e.jsx(P,{variant:"secondary",onClick:s,children:"Cancel"}),e.jsx(P,{variant:"primary",onClick:s,children:"Delete quiz"})]})]})]})},bt=({quiz:t,eventKey:n})=>{const{title:s,description:a,questions:r,publishedAt:i,category:o,complexity:d,authorId:c}=t,{currentUser:u}=w();return e.jsxs(O.Item,{eventKey:n,children:[e.jsx(O.Header,{children:s}),e.jsxs(O.Body,{className:"text-start position-relative",children:[e.jsxs("small",{className:B.itemSmalltext,children:["Published at: ",i.toLocaleDateString()]}),e.jsxs("p",{className:B.itemText,children:["Description: ",a]}),e.jsxs("p",{className:B.itemText,children:["Category: ",o]}),e.jsxs("p",{className:B.itemText,children:["Complexity: ",d]}),e.jsxs("p",{className:B.itemText,children:["Amount of question: ",r.length]}),(u==null?void 0:u.id)===c&&e.jsx(Ct,{})]})]})},ve=({quizes:t,isLoading:n})=>e.jsx(O,{defaultActiveKey:"0",flush:!0,children:n?e.jsx(ze,{}):t?t.map((s,a)=>e.jsx(bt,{quiz:s,eventKey:a.toString()},s.id)):e.jsx("p",{children:"No quizes yet"})}),St=()=>{const[t,n]=l.useState([]),[s,a]=l.useState(!0),{currentUser:r}=w();return l.useEffect(()=>{(async()=>{a(!0);try{if(r){const o=await Se(r.id);o&&(n(o),a(!1))}}catch(o){if(o instanceof Error)throw new Error(o.message)}})()},[r]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"pt-3 text-center",children:[e.jsx("h6",{className:"mb-3",children:"User Quiz List"}),e.jsx(ve,{quizes:t,isLoading:s})]})})},Nt="_container_p50ix_1",Et={container:Nt},$t=()=>e.jsxs("div",{className:Et.container,children:[e.jsx("h5",{className:"mb-3 text-center",children:"My Quizes"}),e.jsx(Be,{}),e.jsx(St,{})]}),wt=()=>{const[t,n]=l.useState([]),[s,a]=l.useState(!0),{currentUser:r}=w();return l.useEffect(()=>{(async()=>{a(!0);try{if(r){const o=await Ne(r==null?void 0:r.favorites);o&&n(o)}a(!1)}catch(o){if(o instanceof Error)throw new Error(o.message)}})()},[r]),e.jsxs("div",{className:"pt-3 text-center",children:[e.jsx("h5",{className:"mb-3",children:"User Favorites"}),e.jsx(ve,{quizes:t,isLoading:s})]})},It="_userCardInfo_1icpt_1",Tt="_show_1icpt_5",R={userCardInfo:It,show:Tt},At=()=>e.jsx(A.Container,{id:"user-card",defaultActiveKey:"statistics",children:e.jsxs(Ie,{children:[e.jsxs(E,{variant:"tabs",className:"p-0",fill:!0,children:[e.jsx(E.Item,{children:e.jsx(E.Link,{className:R.show,as:F,to:"#statistics",eventKey:"statistics",children:"Statistics"})}),e.jsx(E.Item,{children:e.jsx(E.Link,{className:R.show,as:F,to:"#my-quizes",eventKey:"my-quizes",children:"My Quizes"})}),e.jsx(E.Item,{children:e.jsx(E.Link,{className:R.show,as:F,to:"#favorites",eventKey:"favorites",children:"Favorites"})})]}),e.jsxs(A.Content,{children:[e.jsx(A.Pane,{eventKey:"statistics",title:"Statistics",children:e.jsx(ft,{})}),e.jsx(A.Pane,{eventKey:"my-quizes",title:"My Quizes",children:e.jsx($t,{})}),e.jsx(A.Pane,{eventKey:"favorites",title:"Favorites",children:e.jsx(wt,{})})]})]})}),Zt=()=>e.jsx(Te,{className:V.userSection,children:e.jsxs(C,{className:V.userSectionCard,children:[e.jsx(it,{}),e.jsx(At,{})]})});export{Zt as default};
