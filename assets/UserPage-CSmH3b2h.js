import{r as l,j as e,R as N,a as A,b as he,c as ge,g as ve,e as J,s as ye,d as je,f as Ce,L as _}from"./index-MuCFj5nI.js";import{a as be}from"./index-BCu5u5ZR.js";import{u as S,c as j}from"./divWithClassName-PIdDVMOf.js";import{m as Se,F as Ee}from"./Form-1QgDQl4a.js";import{C as b}from"./Card-C7rcnU2f.js";import{P as E,B as W,a as $e,C as Ne}from"./Col-CMSdG19z.js";import{u as we,T as z,m as Z,S as L}from"./types-COfAX2O5.js";import{N as X,F as Y}from"./store-HnSe--Jm.js";import{G as Ie}from"./index-B2q41j2n.js";import{A as Te}from"./AddQuizComponent-Dd32m_EQ.js";import{C as Ae}from"./Collapse-EvfHuiYG.js";import{L as Pe}from"./Loader-CYI54JBH.js";import{N as $}from"./Nav-Bg9qZ6kV.js";import"./index.esm-BZhr--Vz.js";import"./const-B1oEj4dp.js";import"./addClassnameToText-CvYG5FHj.js";function ee(t,n){return Array.isArray(t)?t.includes(n):t===n}const P=l.createContext({});P.displayName="AccordionContext";const M=l.forwardRef(({as:t="div",bsPrefix:n,className:a,children:s,eventKey:r,...i},o)=>{const{activeEventKey:d}=l.useContext(P);return n=S(n,"accordion-collapse"),e.jsx(Ae,{ref:o,in:ee(d,r),...i,className:j(a,n),children:e.jsx(t,{children:l.Children.only(s)})})});M.displayName="AccordionCollapse";const K=l.createContext({eventKey:""});K.displayName="AccordionItemContext";const te=l.forwardRef(({as:t="div",bsPrefix:n,className:a,onEnter:s,onEntering:r,onEntered:i,onExit:o,onExiting:d,onExited:c,...u},m)=>{n=S(n,"accordion-body");const{eventKey:f}=l.useContext(K);return e.jsx(M,{eventKey:f,onEnter:s,onEntering:r,onEntered:i,onExit:o,onExiting:d,onExited:c,children:e.jsx(t,{ref:m,...u,className:j(a,n)})})});te.displayName="AccordionBody";function Oe(t,n){const{activeEventKey:a,onSelect:s,alwaysOpen:r}=l.useContext(P);return i=>{let o=t===a?null:t;r&&(Array.isArray(a)?a.includes(t)?o=a.filter(d=>d!==t):o=[...a,t]:o=[t]),s==null||s(o,i),n==null||n(i)}}const Q=l.forwardRef(({as:t="button",bsPrefix:n,className:a,onClick:s,...r},i)=>{n=S(n,"accordion-button");const{eventKey:o}=l.useContext(K),d=Oe(o,s),{activeEventKey:c}=l.useContext(P);return t==="button"&&(r.type="button"),e.jsx(t,{ref:i,onClick:d,...r,"aria-expanded":Array.isArray(c)?c.includes(o):o===c,className:j(a,n,!ee(c,o)&&"collapsed")})});Q.displayName="AccordionButton";const ne=l.forwardRef(({as:t="h2",bsPrefix:n,className:a,children:s,onClick:r,...i},o)=>(n=S(n,"accordion-header"),e.jsx(t,{ref:o,...i,className:j(a,n),children:e.jsx(Q,{onClick:r,children:s})})));ne.displayName="AccordionHeader";const se=l.forwardRef(({as:t="div",bsPrefix:n,className:a,eventKey:s,...r},i)=>{n=S(n,"accordion-item");const o=l.useMemo(()=>({eventKey:s}),[s]);return e.jsx(K.Provider,{value:o,children:e.jsx(t,{ref:i,...r,className:j(a,n)})})});se.displayName="AccordionItem";const ae=l.forwardRef((t,n)=>{const{as:a="div",activeKey:s,bsPrefix:r,className:i,onSelect:o,flush:d,alwaysOpen:c,...u}=we(t,{activeKey:"onSelect"}),m=S(r,"accordion"),f=l.useMemo(()=>({activeEventKey:s,onSelect:o,alwaysOpen:c}),[s,o,c]);return e.jsx(P.Provider,{value:f,children:e.jsx(a,{ref:n,...u,className:j(i,m,d&&`${m}-flush`)})})});ae.displayName="Accordion";const O=Object.assign(ae,{Button:Q,Collapse:M,Item:se,Header:ne,Body:te});function Be(t,n,a){const s=l.useRef(t!==void 0),[r,i]=l.useState(n),o=t!==void 0,d=s.current;return s.current=o,!o&&d&&r!==n&&i(n),[o?t:r,l.useCallback((...c)=>{const[u,...m]=c;let f=a==null?void 0:a(u,...m);return i(u),f},[a])]}const B={prefix:String(Math.round(Math.random()*1e10)),current:0},oe=N.createContext(B),ze=N.createContext(!1);let Ke=!!(typeof window<"u"&&window.document&&window.document.createElement),F=new WeakMap;function _e(t=!1){let n=l.useContext(oe),a=l.useRef(null);if(a.current===null&&!t){var s,r;let i=(r=N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(s=r.ReactCurrentOwner)===null||s===void 0?void 0:s.current;if(i){let o=F.get(i);o==null?F.set(i,{id:n.current,state:i.memoizedState}):i.memoizedState!==o.state&&(n.current=o.id,F.delete(i))}a.current=++n.current}return a.current}function Fe(t){let n=l.useContext(oe);n===B&&!Ke&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let a=_e(!!t),s=`react-aria${n.prefix}`;return t||`${s}-${a}`}function ke(t){let n=N.useId(),[a]=l.useState(Ue()),s=a?"react-aria":`react-aria${B.prefix}`;return t||`${s}-${n}`}const Re=typeof N.useId=="function"?ke:Fe;function Le(){return!1}function Me(){return!0}function Qe(t){return()=>{}}function Ue(){return typeof N.useSyncExternalStore=="function"?N.useSyncExternalStore(Qe,Le,Me):l.useContext(ze)}const q=1e3;function Ze(t,n,a){const s=(t-n)/(a-n)*100;return Math.round(s*q)/q}function H({min:t,now:n,max:a,label:s,visuallyHidden:r,striped:i,animated:o,className:d,style:c,variant:u,bsPrefix:m,...f},p){return e.jsx("div",{ref:p,...f,role:"progressbar",className:j(d,`${m}-bar`,{[`bg-${u}`]:u,[`${m}-bar-animated`]:o,[`${m}-bar-striped`]:o||i}),style:{width:`${Ze(n,t,a)}%`,...c},"aria-valuenow":n,"aria-valuemin":t,"aria-valuemax":a,children:r?e.jsx("span",{className:"visually-hidden",children:s}):s})}const re=l.forwardRef(({isChild:t=!1,...n},a)=>{const s={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...n};if(s.bsPrefix=S(s.bsPrefix,"progress"),t)return H(s,a);const{min:r,now:i,max:o,label:d,visuallyHidden:c,striped:u,animated:m,bsPrefix:f,variant:p,className:x,children:h,...g}=s;return e.jsx("div",{ref:a,...g,className:j(x,f),children:h?Se(h,y=>l.cloneElement(y,{isChild:!0})):H({min:r,now:i,max:o,label:d,visuallyHidden:c,striped:u,animated:m,bsPrefix:f,variant:p},a)})});re.displayName="ProgressBar";const qe=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],He=["activeKey","getControlledId","getControllerId"],De=["as"];function R(t,n){if(t==null)return{};var a={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(n.indexOf(r)>=0)&&(a[r]=t[r]);return a}function ie(t){let{active:n,eventKey:a,mountOnEnter:s,transition:r,unmountOnExit:i,role:o="tabpanel",onEnter:d,onEntering:c,onEntered:u,onExit:m,onExiting:f,onExited:p}=t,x=R(t,qe);const h=l.useContext(z);if(!h)return[Object.assign({},x,{role:o}),{eventKey:a,isActive:n,mountOnEnter:s,transition:r,unmountOnExit:i,onEnter:d,onEntering:c,onEntered:u,onExit:m,onExiting:f,onExited:p}];const{activeKey:g,getControlledId:y,getControllerId:v}=h,w=R(h,He),U=Z(a);return[Object.assign({},x,{role:o,id:y(a),"aria-labelledby":v(a)}),{eventKey:a,isActive:n==null&&U!=null?Z(g)===U:n,transition:r||w.transition,mountOnEnter:s??w.mountOnEnter,unmountOnExit:i??w.unmountOnExit,onEnter:d,onEntering:c,onEntered:u,onExit:m,onExiting:f,onExited:p}]}const ce=l.forwardRef((t,n)=>{let{as:a="div"}=t,s=R(t,De);const[r,{isActive:i,onEnter:o,onEntering:d,onEntered:c,onExit:u,onExiting:m,onExited:f,mountOnEnter:p,unmountOnExit:x,transition:h=X}]=ie(s);return e.jsx(z.Provider,{value:null,children:e.jsx(L.Provider,{value:null,children:e.jsx(h,{in:i,onEnter:o,onEntering:d,onEntered:c,onExit:u,onExiting:m,onExited:f,mountOnEnter:p,unmountOnExit:x,children:e.jsx(a,Object.assign({},r,{ref:n,hidden:!i,"aria-hidden":!i}))})})})});ce.displayName="TabPanel";const le=t=>{const{id:n,generateChildId:a,onSelect:s,activeKey:r,defaultActiveKey:i,transition:o,mountOnEnter:d,unmountOnExit:c,children:u}=t,[m,f]=Be(r,i,s),p=Re(n),x=l.useMemo(()=>a||((g,y)=>p?`${p}-${y}-${g}`:null),[p,a]),h=l.useMemo(()=>({onSelect:f,activeKey:m,transition:o,mountOnEnter:d||!1,unmountOnExit:c||!1,getControlledId:g=>x(g,"tabpane"),getControllerId:g=>x(g,"tab")}),[f,m,o,d,c,x]);return e.jsx(z.Provider,{value:h,children:e.jsx(L.Provider,{value:f||null,children:u})})};le.Panel=ce;function de(t){return typeof t=="boolean"?t?Y:X:t}const ue=({transition:t,...n})=>e.jsx(le,{...n,transition:de(t)});ue.displayName="TabContainer";const me=l.forwardRef(({className:t,bsPrefix:n,as:a="div",...s},r)=>(n=S(n,"tab-content"),e.jsx(a,{ref:r,className:j(t,n),...s})));me.displayName="TabContent";const xe=l.forwardRef(({bsPrefix:t,transition:n,...a},s)=>{const[{className:r,as:i="div",...o},{isActive:d,onEnter:c,onEntering:u,onEntered:m,onExit:f,onExiting:p,onExited:x,mountOnEnter:h,unmountOnExit:g,transition:y=Y}]=ie({...a,transition:de(n)}),v=S(t,"tab-pane");return e.jsx(z.Provider,{value:null,children:e.jsx(L.Provider,{value:null,children:e.jsx(y,{in:d,onEnter:c,onEntering:u,onEntered:m,onExit:f,onExiting:p,onExited:x,mountOnEnter:h,unmountOnExit:g,children:e.jsx(i,{...o,ref:s,className:j(r,v,d&&"active")})})})})});xe.displayName="TabPane";const Ge={eventKey:E.oneOfType([E.string,E.number]),title:E.node.isRequired,disabled:E.bool,tabClassName:E.string,tabAttrs:E.object},fe=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};fe.propTypes=Ge;const I=Object.assign(fe,{Container:ue,Content:me,Pane:xe}),Ve="_userSection_yo8ue_1",Je="_userSectionCard_yo8ue_8",We="_userCardInfo_yo8ue_20",D={userSection:Ve,userSectionCard:Je,userCardInfo:We},Xe="_card_1feeo_1",Ye="_cardTitle_1feeo_17",et="_cardText_1feeo_23",tt="_cardImg_1feeo_33",nt="_imgChangeContainer_1feeo_41",st="_imgChangeBtn_1feeo_46",at="_imgChgangeIcon_1feeo_56",ot="_inputUpload_1feeo_70",C={card:Xe,cardTitle:Ye,cardText:et,cardImg:tt,imgChangeContainer:nt,imgChangeBtn:st,imgChgangeIcon:at,inputUpload:ot},rt=()=>{const[t,n]=l.useState(),[a,s]=l.useState(""),[r,i]=l.useState(0),[o,d]=l.useState(!1),{currentUser:c,setCurrentUser:u}=A(),m=x=>{x&&x[0].size<1e7?(n(x[0]),console.log(x[0])):console.log("File is too big")};l.useEffect(()=>{t&&(()=>{if(t){const h=(new Date().getTime()+t.name).replace(/\s/g,""),g=he(ye,`image/${h}`),y=ge(g,t);y.on("state_changed",v=>{const w=v.bytesTransferred/v.totalBytes*100;switch(console.log("Upload is "+w+"% done"),i(w),v.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},v=>{console.log(v)},()=>{ve(y.snapshot.ref).then(v=>{s(v),console.log(v)})})}else console.log("File not found")})()},[t]);const f=async()=>{d(!0);try{c&&(await J(c==null?void 0:c.id,"avatar",a),u(x=>({...x??{},avatar:a}))),i(0),n(void 0),s(""),d(!1)}catch(x){console.log(x)}},p=c==null?void 0:c.dateOfBirth.toLocaleDateString().split("/").join(".");return e.jsx(b,{className:C.card,children:e.jsxs(b.Body,{className:C.imgChangeContainer,children:[e.jsxs("label",{className:C.inputUpload,children:[e.jsx(be,{className:C.imgChgangeIcon}),e.jsx("input",{type:"file",onChange:x=>m(x.target.files)})]}),e.jsx(b.Img,{src:a||(c==null?void 0:c.avatar),className:C.cardImg}),e.jsx(b.Title,{className:C.cardTitle,children:c==null?void 0:c.name}),e.jsx(b.Text,{className:C.cardText,children:c==null?void 0:c.email}),e.jsx(b.Text,{className:C.cardText,children:p}),e.jsx(b.Text,{className:C.cardText,children:c==null?void 0:c.gender}),e.jsxs(b.Footer,{children:[e.jsx(re,{animated:!0,now:r}),e.jsx(W,{className:"w-100 mt-3",disabled:r!==100,onClick:f,children:o?"Saving...":"Save"})]})]})})},it="_starZero_1wgyi_1",ct="_starRating_1wgyi_7",G={starZero:it,starRating:ct};function lt(){const{currentUser:t}=A();return e.jsxs("div",{children:[e.jsxs("h5",{className:"mb-1",children:["Rating: ",(t==null?void 0:t.avarageScore)||8]}),[1,2,3,4,5,6,7,8,9,10].map(n=>e.jsxs("span",{className:t!=null&&t.avarageScore||8>=n?G.starRating:G.starZero,children:[" ","★"," "]},n))]})}const dt="_aboutText_13ccc_1",ut="_editIcon_13ccc_5",V={aboutText:dt,editIcon:ut};function mt(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(t)}const xt=()=>{const[t,n]=l.useState(!1),{setCurrentUser:a,currentUser:s}=A(),[r,i]=l.useState((s==null?void 0:s.userInfo)||"I'm a new user and I don't have a bio yet"),o=()=>{n(!t)},d=u=>{i(u)},c=async()=>{s&&(await J(s==null?void 0:s.id,"userInfo",r),a(u=>({...u??{},userInfo:r}))),n(!t)};return e.jsxs("div",{className:"mt-3",children:[e.jsxs("h4",{className:"mb-3",children:["About me ",e.jsx(mt,{className:V.editIcon,onClick:o})]}),t?e.jsxs("div",{children:[e.jsx(Ee.Control,{as:"textarea",value:r,onChange:u=>d(u.target.value)}),e.jsx(W,{className:"mt-3",onClick:c,children:"Save"})]}):e.jsx("p",{className:V.aboutText,children:s==null?void 0:s.userInfo})]})},ft=()=>e.jsxs("div",{className:"pt-3",children:[e.jsx("h5",{className:"mb-4  text-center",children:"My statistics"}),e.jsx(lt,{}),e.jsx(xt,{})]}),pt="_itemText_uu0p2_1",ht="_itemSmalltext_uu0p2_5",T={itemText:pt,itemSmalltext:ht},gt=({quiz:t,eventKey:n})=>{const{title:a,description:s,questions:r,publishedAt:i,category:o,complexity:d}=t;return e.jsxs(O.Item,{eventKey:n,children:[e.jsx(O.Header,{children:a}),e.jsxs(O.Body,{className:"text-start",children:[e.jsxs("small",{className:T.itemSmalltext,children:["Published at: ",i.toLocaleDateString()]}),e.jsxs("p",{className:T.itemText,children:["Description: ",s]}),e.jsxs("p",{className:T.itemText,children:["Category: ",o]}),e.jsxs("p",{className:T.itemText,children:["Complexity: ",d]}),e.jsxs("p",{className:T.itemText,children:["Amount of question: ",r.length]})]})]})},pe=({quizes:t,isLoading:n})=>e.jsx(O,{defaultActiveKey:"0",flush:!0,children:n?e.jsx(Pe,{}):t?t.map((a,s)=>e.jsx(gt,{quiz:a,eventKey:s.toString()},a.id)):e.jsx("p",{children:"No quizes yet"})}),vt=()=>{const[t,n]=l.useState([]),[a,s]=l.useState(!0),{currentUser:r}=A();return l.useEffect(()=>{(async()=>{s(!0);try{if(r){const o=await je(r.id);o&&(n(o),s(!1))}}catch(o){if(o instanceof Error)throw new Error(o.message)}})()},[r]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"pt-3 text-center",children:[e.jsx("h6",{className:"mb-3",children:"User Quiz List"}),e.jsx(pe,{quizes:t,isLoading:a})]})})},yt="_container_p50ix_1",jt={container:yt},Ct=()=>e.jsxs("div",{className:jt.container,children:[e.jsx("h5",{className:"mb-3 text-center",children:"My Quizes"}),e.jsx(Te,{}),e.jsx(vt,{})]}),bt=()=>{const[t,n]=l.useState([]),[a,s]=l.useState(!0),{currentUser:r}=A();return l.useEffect(()=>{(async()=>{s(!0);try{if(r){const o=await Ce(r==null?void 0:r.favorites);o&&n(o)}s(!1)}catch(o){if(o instanceof Error)throw new Error(o.message)}})()},[r]),e.jsxs("div",{className:"pt-3 text-center",children:[e.jsx("h5",{className:"mb-3",children:"User Favorites"}),e.jsx(pe,{quizes:t,isLoading:a})]})},St="_userCardInfo_1icpt_1",Et="_show_1icpt_5",k={userCardInfo:St,show:Et},$t=()=>e.jsx(I.Container,{id:"user-card",defaultActiveKey:"statistics",children:e.jsxs($e,{children:[e.jsxs($,{variant:"tabs",className:"p-0",fill:!0,children:[e.jsx($.Item,{children:e.jsx($.Link,{className:k.show,as:_,to:"#statistics",eventKey:"statistics",children:"Statistics"})}),e.jsx($.Item,{children:e.jsx($.Link,{className:k.show,as:_,to:"#my-quizes",eventKey:"my-quizes",children:"My Quizes"})}),e.jsx($.Item,{children:e.jsx($.Link,{className:k.show,as:_,to:"#favorites",eventKey:"favorites",children:"Favorites"})})]}),e.jsxs(I.Content,{children:[e.jsx(I.Pane,{eventKey:"statistics",title:"Statistics",children:e.jsx(ft,{})}),e.jsx(I.Pane,{eventKey:"my-quizes",title:"My Quizes",children:e.jsx(Ct,{})}),e.jsx(I.Pane,{eventKey:"favorites",title:"Favorites",children:e.jsx(bt,{})})]})]})}),Qt=()=>e.jsx(Ne,{className:D.userSection,children:e.jsxs(b,{className:D.userSectionCard,children:[e.jsx(rt,{}),e.jsx($t,{})]})});export{Qt as default};
