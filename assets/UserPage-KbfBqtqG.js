import{r as l,j as e,R as N,a as w,b as je,c as ye,g as Ce,e as Y,s as be,d as $e,f as Se,L as F}from"./index-D67BVwrx.js";import{a as Ee}from"./index-CtAWsjYZ.js";import{u as b,c as y}from"./divWithClassName-Bhcbn9v1.js";import{m as Ne,F as we}from"./Form-D3OJ5HJM.js";import{C}from"./Card-CxsbtrBJ.js";import{P as S,B,a as Ie,C as Te}from"./Col-CqiWpbRJ.js";import{u as Ae,T as M,m as H,S as q}from"./Nav-BPWB2oVf.js";import{N as ee,F as te}from"./store-Cka-TZOi.js";import{G as ne}from"./index-Bo0GEc-O.js";import{M as T,A as Be}from"./AddQuizComponent-C15elg9Y.js";import{C as ze}from"./Collapse-LHBwlP4g.js";import{L as Pe}from"./Loader-BI1PLYBQ.js";import{N as E}from"./Nav-YmEJBAdK.js";import"./index.esm-lPE540Tm.js";import"./addClassnameToText-B6CJtSOF.js";function se(t,n){return Array.isArray(t)?t.includes(n):t===n}const z=l.createContext({});z.displayName="AccordionContext";const L=l.forwardRef(({as:t="div",bsPrefix:n,className:a,children:s,eventKey:o,...i},r)=>{const{activeEventKey:d}=l.useContext(z);return n=b(n,"accordion-collapse"),e.jsx(ze,{ref:r,in:se(d,o),...i,className:y(a,n),children:e.jsx(t,{children:l.Children.only(s)})})});L.displayName="AccordionCollapse";const _=l.createContext({eventKey:""});_.displayName="AccordionItemContext";const ae=l.forwardRef(({as:t="div",bsPrefix:n,className:a,onEnter:s,onEntering:o,onEntered:i,onExit:r,onExiting:d,onExited:c,...u},m)=>{n=b(n,"accordion-body");const{eventKey:x}=l.useContext(_);return e.jsx(L,{eventKey:x,onEnter:s,onEntering:o,onEntered:i,onExit:r,onExiting:d,onExited:c,children:e.jsx(t,{ref:m,...u,className:y(a,n)})})});ae.displayName="AccordionBody";function Oe(t,n){const{activeEventKey:a,onSelect:s,alwaysOpen:o}=l.useContext(z);return i=>{let r=t===a?null:t;o&&(Array.isArray(a)?a.includes(t)?r=a.filter(d=>d!==t):r=[...a,t]:r=[t]),s==null||s(r,i),n==null||n(i)}}const Q=l.forwardRef(({as:t="button",bsPrefix:n,className:a,onClick:s,...o},i)=>{n=b(n,"accordion-button");const{eventKey:r}=l.useContext(_),d=Oe(r,s),{activeEventKey:c}=l.useContext(z);return t==="button"&&(o.type="button"),e.jsx(t,{ref:i,onClick:d,...o,"aria-expanded":Array.isArray(c)?c.includes(r):r===c,className:y(a,n,!se(c,r)&&"collapsed")})});Q.displayName="AccordionButton";const oe=l.forwardRef(({as:t="h2",bsPrefix:n,className:a,children:s,onClick:o,...i},r)=>(n=b(n,"accordion-header"),e.jsx(t,{ref:r,...i,className:y(a,n),children:e.jsx(Q,{onClick:o,children:s})})));oe.displayName="AccordionHeader";const re=l.forwardRef(({as:t="div",bsPrefix:n,className:a,eventKey:s,...o},i)=>{n=b(n,"accordion-item");const r=l.useMemo(()=>({eventKey:s}),[s]);return e.jsx(_.Provider,{value:r,children:e.jsx(t,{ref:i,...o,className:y(a,n)})})});re.displayName="AccordionItem";const ie=l.forwardRef((t,n)=>{const{as:a="div",activeKey:s,bsPrefix:o,className:i,onSelect:r,flush:d,alwaysOpen:c,...u}=Ae(t,{activeKey:"onSelect"}),m=b(o,"accordion"),x=l.useMemo(()=>({activeEventKey:s,onSelect:r,alwaysOpen:c}),[s,r,c]);return e.jsx(z.Provider,{value:x,children:e.jsx(a,{ref:n,...u,className:y(i,m,d&&`${m}-flush`)})})});ie.displayName="Accordion";const P=Object.assign(ie,{Button:Q,Collapse:L,Item:re,Header:oe,Body:ae});function Me(t,n,a){const s=l.useRef(t!==void 0),[o,i]=l.useState(n),r=t!==void 0,d=s.current;return s.current=r,!r&&d&&o!==n&&i(n),[r?t:o,l.useCallback((...c)=>{const[u,...m]=c;let x=a==null?void 0:a(u,...m);return i(u),x},[a])]}const O={prefix:String(Math.round(Math.random()*1e10)),current:0},ce=N.createContext(O),_e=N.createContext(!1);let Fe=!!(typeof window<"u"&&window.document&&window.document.createElement),K=new WeakMap;function Ke(t=!1){let n=l.useContext(ce),a=l.useRef(null);if(a.current===null&&!t){var s,o;let i=(o=N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||o===void 0||(s=o.ReactCurrentOwner)===null||s===void 0?void 0:s.current;if(i){let r=K.get(i);r==null?K.set(i,{id:n.current,state:i.memoizedState}):i.memoizedState!==r.state&&(n.current=r.id,K.delete(i))}a.current=++n.current}return a.current}function ke(t){let n=l.useContext(ce);n===O&&!Fe&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let a=Ke(!!t),s=`react-aria${n.prefix}`;return t||`${s}-${a}`}function Re(t){let n=N.useId(),[a]=l.useState(He()),s=a?"react-aria":`react-aria${O.prefix}`;return t||`${s}-${n}`}const qe=typeof N.useId=="function"?Re:ke;function Le(){return!1}function Qe(){return!0}function Ue(t){return()=>{}}function He(){return typeof N.useSyncExternalStore=="function"?N.useSyncExternalStore(Ue,Le,Qe):l.useContext(_e)}const Z=1e3;function Ze(t,n,a){const s=(t-n)/(a-n)*100;return Math.round(s*Z)/Z}function D({min:t,now:n,max:a,label:s,visuallyHidden:o,striped:i,animated:r,className:d,style:c,variant:u,bsPrefix:m,...x},f){return e.jsx("div",{ref:f,...x,role:"progressbar",className:y(d,`${m}-bar`,{[`bg-${u}`]:u,[`${m}-bar-animated`]:r,[`${m}-bar-striped`]:r||i}),style:{width:`${Ze(n,t,a)}%`,...c},"aria-valuenow":n,"aria-valuemin":t,"aria-valuemax":a,children:o?e.jsx("span",{className:"visually-hidden",children:s}):s})}const le=l.forwardRef(({isChild:t=!1,...n},a)=>{const s={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...n};if(s.bsPrefix=b(s.bsPrefix,"progress"),t)return D(s,a);const{min:o,now:i,max:r,label:d,visuallyHidden:c,striped:u,animated:m,bsPrefix:x,variant:f,className:h,children:p,...g}=s;return e.jsx("div",{ref:a,...g,className:y(h,x),children:p?Ne(p,j=>l.cloneElement(j,{isChild:!0})):D({min:o,now:i,max:r,label:d,visuallyHidden:c,striped:u,animated:m,bsPrefix:x,variant:f},a)})});le.displayName="ProgressBar";const De=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Ge=["activeKey","getControlledId","getControllerId"],Ve=["as"];function R(t,n){if(t==null)return{};var a={},s=Object.keys(t),o,i;for(i=0;i<s.length;i++)o=s[i],!(n.indexOf(o)>=0)&&(a[o]=t[o]);return a}function de(t){let{active:n,eventKey:a,mountOnEnter:s,transition:o,unmountOnExit:i,role:r="tabpanel",onEnter:d,onEntering:c,onEntered:u,onExit:m,onExiting:x,onExited:f}=t,h=R(t,De);const p=l.useContext(M);if(!p)return[Object.assign({},h,{role:r}),{eventKey:a,isActive:n,mountOnEnter:s,transition:o,unmountOnExit:i,onEnter:d,onEntering:c,onEntered:u,onExit:m,onExiting:x,onExited:f}];const{activeKey:g,getControlledId:j,getControllerId:v}=p,I=R(p,Ge),U=H(a);return[Object.assign({},h,{role:r,id:j(a),"aria-labelledby":v(a)}),{eventKey:a,isActive:n==null&&U!=null?H(g)===U:n,transition:o||I.transition,mountOnEnter:s??I.mountOnEnter,unmountOnExit:i??I.unmountOnExit,onEnter:d,onEntering:c,onEntered:u,onExit:m,onExiting:x,onExited:f}]}const ue=l.forwardRef((t,n)=>{let{as:a="div"}=t,s=R(t,Ve);const[o,{isActive:i,onEnter:r,onEntering:d,onEntered:c,onExit:u,onExiting:m,onExited:x,mountOnEnter:f,unmountOnExit:h,transition:p=ee}]=de(s);return e.jsx(M.Provider,{value:null,children:e.jsx(q.Provider,{value:null,children:e.jsx(p,{in:i,onEnter:r,onEntering:d,onEntered:c,onExit:u,onExiting:m,onExited:x,mountOnEnter:f,unmountOnExit:h,children:e.jsx(a,Object.assign({},o,{ref:n,hidden:!i,"aria-hidden":!i}))})})})});ue.displayName="TabPanel";const me=t=>{const{id:n,generateChildId:a,onSelect:s,activeKey:o,defaultActiveKey:i,transition:r,mountOnEnter:d,unmountOnExit:c,children:u}=t,[m,x]=Me(o,i,s),f=qe(n),h=l.useMemo(()=>a||((g,j)=>f?`${f}-${j}-${g}`:null),[f,a]),p=l.useMemo(()=>({onSelect:x,activeKey:m,transition:r,mountOnEnter:d||!1,unmountOnExit:c||!1,getControlledId:g=>h(g,"tabpane"),getControllerId:g=>h(g,"tab")}),[x,m,r,d,c,h]);return e.jsx(M.Provider,{value:p,children:e.jsx(q.Provider,{value:x||null,children:u})})};me.Panel=ue;function xe(t){return typeof t=="boolean"?t?te:ee:t}const he=({transition:t,...n})=>e.jsx(me,{...n,transition:xe(t)});he.displayName="TabContainer";const fe=l.forwardRef(({className:t,bsPrefix:n,as:a="div",...s},o)=>(n=b(n,"tab-content"),e.jsx(a,{ref:o,className:y(t,n),...s})));fe.displayName="TabContent";const pe=l.forwardRef(({bsPrefix:t,transition:n,...a},s)=>{const[{className:o,as:i="div",...r},{isActive:d,onEnter:c,onEntering:u,onEntered:m,onExit:x,onExiting:f,onExited:h,mountOnEnter:p,unmountOnExit:g,transition:j=te}]=de({...a,transition:xe(n)}),v=b(t,"tab-pane");return e.jsx(M.Provider,{value:null,children:e.jsx(q.Provider,{value:null,children:e.jsx(j,{in:d,onEnter:c,onEntering:u,onEntered:m,onExit:x,onExiting:f,onExited:h,mountOnEnter:p,unmountOnExit:g,children:e.jsx(i,{...r,ref:s,className:y(o,v,d&&"active")})})})})});pe.displayName="TabPane";const Je={eventKey:S.oneOfType([S.string,S.number]),title:S.node.isRequired,disabled:S.bool,tabClassName:S.string,tabAttrs:S.object},ge=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};ge.propTypes=Je;const A=Object.assign(ge,{Container:he,Content:fe,Pane:pe}),We="_userSection_yo8ue_1",Xe="_userSectionCard_yo8ue_8",Ye="_userCardInfo_yo8ue_20",G={userSection:We,userSectionCard:Xe,userCardInfo:Ye},et="_card_13jgq_1",tt="_cardTitle_13jgq_17",nt="_cardText_13jgq_24",st="_cardImg_13jgq_33",at="_imgChangeBtn_13jgq_40",ot="_imgChgangeIcon_13jgq_50",rt="_inputUpload_13jgq_64",$={card:et,cardTitle:tt,cardText:nt,cardImg:st,imgChangeBtn:at,imgChgangeIcon:ot,inputUpload:rt},it=()=>{const[t,n]=l.useState(),[a,s]=l.useState(""),[o,i]=l.useState(0),[r,d]=l.useState(!1),{currentUser:c,setCurrentUser:u}=w(),m=h=>{h&&h[0].size<1e7?n(h[0]):console.log("File is too big")};l.useEffect(()=>{t&&(()=>{if(t){const p=(new Date().getTime()+t.name).replace(/\s/g,""),g=je(be,`image/${p}`),j=ye(g,t);j.on("state_changed",v=>{const I=v.bytesTransferred/v.totalBytes*100;switch(i(I),v.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},v=>{console.log(v)},()=>{Ce(j.snapshot.ref).then(v=>{s(v)})})}else console.log("File not found")})()},[t]);const x=async()=>{d(!0);try{c&&(await Y(c==null?void 0:c.id,"avatar",a),u(h=>({...h??{},avatar:a}))),i(0),n(void 0),s(""),d(!1)}catch(h){console.log(h)}},f=c==null?void 0:c.dateOfBirth.toLocaleDateString().split("/").join(".");return e.jsx(C,{className:$.card,children:e.jsxs(C.Body,{children:[e.jsxs("label",{className:$.inputUpload,children:[e.jsx(Ee,{className:$.imgChgangeIcon}),e.jsx("input",{type:"file",onChange:h=>m(h.target.files)})]}),e.jsx(C.Img,{src:a||(c==null?void 0:c.avatar),className:$.cardImg}),e.jsx(C.Title,{className:$.cardTitle,children:c==null?void 0:c.name}),e.jsx(C.Text,{className:$.cardText,children:c==null?void 0:c.email}),e.jsx(C.Text,{className:$.cardText,children:f}),e.jsx(C.Text,{className:$.cardText,children:c==null?void 0:c.gender}),e.jsxs(C.Footer,{children:[e.jsx(le,{animated:!0,now:o}),e.jsx(B,{className:"w-100 mt-3",disabled:o!==100,onClick:x,children:r?"Saving...":"Save"})]})]})})},ct="_starZero_1wgyi_1",lt="_starRating_1wgyi_7",V={starZero:ct,starRating:lt};function dt(){const{currentUser:t}=w(),n=Number(t==null?void 0:t.avarageScore);return e.jsxs("div",{children:[e.jsxs("h5",{className:"mb-1",children:["Rating: ",n||0,"/10"]}),[1,2,3,4,5,6,7,8,9,10].map(a=>e.jsxs("span",{className:n>=a?V.starRating:V.starZero,children:[" ","★"," "]},a))]})}const ut="_aboutText_13ccc_1",mt="_editIcon_13ccc_5",J={aboutText:ut,editIcon:mt};function xt(t){return ne({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(t)}const ht=()=>{const[t,n]=l.useState(!1),{setCurrentUser:a,currentUser:s}=w(),[o,i]=l.useState((s==null?void 0:s.userInfo)||"I'm a new user and I don't have a bio yet"),r=()=>{n(!t)},d=u=>{i(u)},c=async()=>{s&&(await Y(s==null?void 0:s.id,"userInfo",o),a(u=>({...u??{},userInfo:o}))),n(!t)};return e.jsxs("div",{className:"mt-3",children:[e.jsxs("h4",{className:"mb-3",children:["About me ",e.jsx(xt,{className:J.editIcon,onClick:r})]}),t?e.jsxs("div",{children:[e.jsx(we.Control,{as:"textarea",value:o,onChange:u=>d(u.target.value)}),e.jsx(B,{className:"mt-3",onClick:c,children:"Save"})]}):e.jsx("p",{className:J.aboutText,children:s==null?void 0:s.userInfo})]})},ft=()=>e.jsxs("div",{className:"pt-3",children:[e.jsx("h5",{className:"mb-4  text-center",children:"My statistics"}),e.jsx(dt,{}),e.jsx(ht,{})]}),pt="_itemText_uu0p2_1",gt="_itemSmalltext_uu0p2_5",W={itemText:pt,itemSmalltext:gt};function vt(t){return ne({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M10.935 2.016c-0.218-0.869-0.999-1.516-1.935-1.516-0.932 0-1.71 0.643-1.931 1.516h-3.569v1h11v-1h-3.565zM9 1.5c0.382 0 0.705 0.221 0.875 0.516h-1.733c0.172-0.303 0.485-0.516 0.858-0.516zM13 4h1v10.516c0 0.827-0.673 1.5-1.5 1.5h-7c-0.827 0-1.5-0.673-1.5-1.5v-10.516h1v10.516c0 0.275 0.224 0.5 0.5 0.5h7c0.276 0 0.5-0.225 0.5-0.5v-10.516zM8 5v8h-1v-8h1zM11 5v8h-1v-8h1z"},child:[]}]})(t)}const jt="_deleteBtn_1mwjl_1",yt="_deleteBtnIcon_1mwjl_19",X={deleteBtn:jt,deleteBtnIcon:yt},Ct=()=>{const[t,n]=l.useState(!1),a=()=>n(!1),s=()=>n(!0);return e.jsxs(e.Fragment,{children:[e.jsx(B,{className:X.deleteBtn,onClick:s,children:e.jsx(vt,{className:X.deleteBtnIcon})}),e.jsxs(T,{show:t,onHide:a,centered:!0,children:[e.jsx(T.Header,{closeButton:!0,children:e.jsx(T.Title,{as:"h5",children:"Are you sure you want to delete this quiz?"})}),e.jsx(T.Body,{className:"text-center",children:"Be careful! After deletion, you cannot recover it."}),e.jsxs(T.Footer,{className:"justify-content-center",children:[e.jsx(B,{variant:"secondary",onClick:a,children:"Cancel"}),e.jsx(B,{variant:"primary",onClick:a,children:"Delete quiz"})]})]})]})},bt=({quiz:t,eventKey:n})=>{const{title:a,authorId:s,authorName:o,publishedAt:i,...r}=t,{currentUser:d}=w();return e.jsxs(P.Item,{eventKey:n,children:[e.jsx(P.Header,{children:a}),e.jsxs(P.Body,{className:"text-start position-relative",children:[e.jsx("small",{className:W.itemSmalltext,children:`Published at: ${i.toLocaleDateString()}
          ${(d==null?void 0:d.id)===s?"":`by ${o}`}`}),Object.entries(r).map(([c,u])=>e.jsx("p",{className:W.itemText,children:Array.isArray(u)?"Amount of questions: "+u.length:`${c[0].toUpperCase()+c.slice(1)}: 
                ${u[0].toUpperCase()+u.slice(1)}`},c)),(d==null?void 0:d.id)===s&&e.jsx(Ct,{})]})]})},ve=({quizes:t,isLoading:n})=>e.jsx(P,{defaultActiveKey:"0",flush:!0,children:n?e.jsx(Pe,{}):t?t.map((a,s)=>{const{id:o,...i}=a;return e.jsx(bt,{quiz:i,eventKey:s.toString()},o)}):e.jsx("p",{children:"No quizes yet"})}),$t=()=>{const[t,n]=l.useState([]),[a,s]=l.useState(!0),{currentUser:o}=w();return l.useEffect(()=>{(async()=>{s(!0);try{if(o){const r=await $e(o.id);r&&(n(r),s(!1))}}catch(r){if(r instanceof Error)throw new Error(r.message)}})()},[o]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"pt-3 text-center",children:[e.jsx("h6",{className:"mb-3",children:"User Quiz List"}),e.jsx(ve,{quizes:t,isLoading:a})]})})},St="_container_p50ix_1",Et={container:St},Nt=()=>e.jsxs("div",{className:Et.container,children:[e.jsx("h5",{className:"mb-3 text-center",children:"My Quizes"}),e.jsx(Be,{}),e.jsx($t,{})]}),wt=()=>{const[t,n]=l.useState([]),[a,s]=l.useState(!0),{currentUser:o}=w();return l.useEffect(()=>{(async()=>{s(!0);try{if(o){const r=await Se(o==null?void 0:o.favorites);r&&n(r)}s(!1)}catch(r){if(r instanceof Error)throw new Error(r.message)}})()},[o]),e.jsxs("div",{className:"pt-3 text-center",children:[e.jsx("h5",{className:"mb-3",children:"User Favorites"}),e.jsx(ve,{quizes:t,isLoading:a})]})},It="_userCardInfo_1icpt_1",Tt="_show_1icpt_5",k={userCardInfo:It,show:Tt},At=()=>e.jsx(A.Container,{id:"user-card",defaultActiveKey:"statistics",children:e.jsxs(Ie,{children:[e.jsxs(E,{variant:"tabs",className:"p-0",fill:!0,children:[e.jsx(E.Item,{children:e.jsx(E.Link,{className:k.show,as:F,to:"#statistics",eventKey:"statistics",children:"Statistics"})}),e.jsx(E.Item,{children:e.jsx(E.Link,{className:k.show,as:F,to:"#my-quizes",eventKey:"my-quizes",children:"My Quizes"})}),e.jsx(E.Item,{children:e.jsx(E.Link,{className:k.show,as:F,to:"#favorites",eventKey:"favorites",children:"Favorites"})})]}),e.jsxs(A.Content,{children:[e.jsx(A.Pane,{eventKey:"statistics",title:"Statistics",children:e.jsx(ft,{})}),e.jsx(A.Pane,{eventKey:"my-quizes",title:"My Quizes",children:e.jsx(Nt,{})}),e.jsx(A.Pane,{eventKey:"favorites",title:"Favorites",children:e.jsx(wt,{})})]})]})}),Zt=()=>e.jsx(Te,{className:G.userSection,children:e.jsxs(C,{className:G.userSectionCard,children:[e.jsx(it,{}),e.jsx(At,{})]})});export{Zt as default};
